---
import type { CollectionEntry } from "astro:content";
import PostDate from "./PostDate.astro";
import PostTags from "./PostTags.astro";
import { Image } from "astro:assets";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, description, date, tags, image } = post.data;

// Ensure image dimensions are available to prevent CLS
const imageWidth = 800; // Set appropriate default width
const imageHeight = 400; // Set appropriate default height
---

<article
  class="group/card block w-200 rounded-xl shadow-md hover:shadow-xl border border-gray-700 transition-all duration-200 hover:bg-neutral"
>
  <a href={`/blog/${post.slug}`} class="block p-4 sm:p-6">
    {
      image && (
        <Image
          src={image}
          alt={title}
          width={imageWidth}
          height={imageHeight}
          decoding="async"
          loading="eager"
          class="w-full h-48 object-cover rounded-lg shadow-md hover:shadow-lg transition-shadow"
        />
      )
    }
    <h2 class="text-xl font-bold mb-4 text-base-content">
      {title}
    </h2>
    <p class="mb-4 text-lg text-gray-100">{description}</p>
    <div class="flex justify-start items-center gap-5">
      <PostDate date={date} />
      {tags && <PostTags tags={tags} />}
    </div>
  </a>
</article>
